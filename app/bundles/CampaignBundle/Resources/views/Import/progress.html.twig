{% extends '@MauticCore/Default/content.html.twig' %}

{% block mauticContent %}campaignImport{% endblock %}

{% block headerTitle %}
    {{ 'mautic.campaign.campaign.import.title'|trans }}
{% endblock %}

{% block content %}
    {% set percent = progress.toPercent %}
    {% set id = complete ? 'campaignImportProgressComplete' : 'campaignImportProgress' %}
    {% set header = complete ? 'mautic.campaign.campaign.import.success' : 'mautic.campaign.campaign.import.donotleave' %}

    <div class="row ma-lg" id="{{ id }}">
        <div class="col-sm-offset-3 col-sm-6 text-center">
            <div class="panel panel-{% if complete %}success{% else %}info{% endif %}">
                <div class="panel-heading">
                    <h4 class="panel-title">{{ header|trans }}</h4>
                </div>
                <div class="panel-body">
                    {% if not complete %}
                        <h4>{{ 'mautic.campaign.campaign.import.inprogress'|trans }}</h4>
                    {% endif %}

                    <div class="progress mt-md" style="height: 50px;">
                        <div class="progress-bar progress-bar-striped {% if not complete %}active{% endif %}"
                             role="progressbar"
                             aria-valuenow="{{ progress.done }}"
                             aria-valuemin="0"
                             aria-valuemax="{{ progress.total }}"
                             style="width: {{ percent }}%; height: 50px;">
                            <span class="sr-only">{{ percent }}%</span>
                        </div>
                    </div>

                    <p class="small">
                        {{ 'mautic.campaign.campaign.import.stats'|trans }}: <span class="imported-count">{{ progress.done }}</span> /
                        <span class="total-count">{{ progress.total }}</span>
                    </p>
                </div>

                <div class="panel-footer">
                    {% if not complete %}
                        <div>
                            <button class="btn btn-danger" id="cancel-import">
                                <i class="fa fa-times"></i> {{ 'mautic.core.form.cancel'|trans }}
                            </button>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
{% endblock %}
